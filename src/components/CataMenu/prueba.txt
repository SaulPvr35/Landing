import React, { useState, useEffect } from 'react';
import { useNavigate, useParams } from 'react-router-dom';

const ActualizarCatalogo = ({ peliculas, setPeliculas }) => {
  const { id } = useParams();
  const navigate = useNavigate();
  
  // Estado para almacenar la información de la película
  const [titulo, setTitulo] = useState('');
  const [descripcion, setDescripcion] = useState('');
  const [imagen, setImagen] = useState('');
  const [genero, setGenero] = useState('');
  const [año, setAño] = useState('');
  
  useEffect(() => {
    if (id) {
      const pelicula = peliculas.find((p) => p.id === parseInt(id));
      if (pelicula) {
        setTitulo(pelicula.titulo);
        setDescripcion(pelicula.descripcion);
        setImagen(pelicula.imagen);
        setGenero(pelicula.genero);
        setAño(pelicula.año);
      }
    }
  }, [id, peliculas]);

  const handleSubmit = (e) => {
    e.preventDefault();

    const nuevaPelicula = {
      id: id ? parseInt(id) : peliculas.length + 1,
      titulo,
      descripcion,
      imagen,
      genero,
      año: parseInt(año),
    };

    const updatedPeliculas = id 
      ? peliculas.map((p) => (p.id === nuevaPelicula.id ? nuevaPelicula : p)) 
      : [...peliculas, nuevaPelicula];

    setPeliculas(updatedPeliculas);
    localStorage.setItem('peliculas', JSON.stringify(updatedPeliculas));
    navigate('/catalogo');
  };

  return (
    <div className="bg-gradient-to-b from-[#004ba2] via-[#0a1c35] to-[#004ca2c4] min-h-screen p-4 flex flex-col">
      <h1 className="text-white text-3xl mb-6 text-center">Actualizar Catálogo de Películas</h1>
      <form onSubmit={handleSubmit} className="max-w-md mx-auto bg-[#002f6c] p-6 rounded-md shadow-md">
        {/* ... los campos del formulario permanecen iguales ... */}
      </form>
    </div>
  );
};

export default ActualizarCatalogo;
